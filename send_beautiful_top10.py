import requests
import os

os.chdir(r'C:\dev\claude code\eps-momentum-us')

BOT_TOKEN = '7948087946:AAGVHj7FdBxr0LRJzQTzfEp0HadzAtoXs-8'
CHAT_ID = '7580571403'

msg = """안녕하세요! 오늘의 EPS 모멘텀 포트폴리오입니다 📊

━━━━━━━━━━━━━━━━━━━━━━━━━
📅 2026년 02월 05일
🔴 하락장 (RED)
• 나스닥 22,905 (-1.51%) ⚠️MA50 하회
• S&P500 6,883 (-0.51%)
• VIX 18.64 (정상)
━━━━━━━━━━━━━━━━━━━━━━━━━

💡 전략 소개
💎 밸류(펀더멘털): EPS모멘텀+ROE+성장률+추세+거래량
💵 가격(타이밍): PEG+PER+52주고점+RSI눌림목

📊 스크리닝: 917개 중 37개 통과 (4.0%)
   RED 시장 → 최고 수준 필터 적용

━━━━━━━━━━━━━━━━━━━━━━━━━

🏆 Claude 최종 추천 TOP 10
(밸류+가격+뉴스+거래량+시장맥락 종합 분석)

━━━━━━━━━━━━━━━━━━━━━━━━━
🥇 1위 [A급] Broadcom Inc.
(AVGO) [반도체]
━━━━━━━━━━━━━━━━━━━━━━━━━
💰 $308.05 (-3.8%)
📊 종합 73.3점 | 💎밸류 77 | 💵가격 70
📈 RSI 31 | 52주고점 대비 -26%

📝 선정 이유:
RED 시장에서 RSI 31 과매도 진입은 희소한 매수 기회. 52주 고점 대비 -26% 급락했으나 매출+28%, 영업익+55% 펀더멘털 건재. AI 반도체 핵심주가 패닉셀링으로 저평가 구간 진입.

⚠️ 리스크: 기술주 전반 매도세 지속 가능, 추가 하락 여지
━━━━━━━━━━━━━━━━━━━━━━━━━
🥇 2위 [B+급] Newmont Corporation
(NEM) [금광]
━━━━━━━━━━━━━━━━━━━━━━━━━
💰 $116.85 (-0.2%)
📊 종합 71.5점 | 💎밸류 63 | 💵가격 80
📈 RSI 53 | 52주고점 대비 -13%

📝 선정 이유:
금광주는 시장 불안 시 안전자산. RED 국면에서 -0.2% 방어력 입증. PEG 0.67 저평가 + 영업익 +102% 폭등. RSI 53 부담없는 진입점. 포트폴리오 헷지용 필수 편입.

⚠️ 리스크: 금값 하락 시 동반 조정, 달러 강세 부정적
━━━━━━━━━━━━━━━━━━━━━━━━━
🥈 3위 [A급] Lumentum Holdings
(LITE) [통신장비]
━━━━━━━━━━━━━━━━━━━━━━━━━
💰 $465.54 (+7.0%)
📊 종합 71.0점 | 💎밸류 77 | 💵가격 52
📈 RSI 78 | 52주고점 대비 -8%

📝 선정 이유:
거래량 2.3배 폭발과 +7% 급등은 기관 수급 유입 신호. A급 펀더멘털(매출+58%, 영업익+121%) 확인. 그러나 RSI 78 과열 구간이므로 조정 시 진입 권장.

⚠️ 리스크: RSI 78 과매수! 단기 차익실현 매물 출회 가능
━━━━━━━━━━━━━━━━━━━━━━━━━
🥈 4위 [B+급] Commercial Metals
(CMC) [철강]
━━━━━━━━━━━━━━━━━━━━━━━━━
💰 $82.70 (+1.0%)
📊 종합 69.7점 | 💎밸류 67 | 💵가격 60
📈 RSI 72 | 52주고점 대비 -2%

📝 선정 이유:
52주 신고가 -1.7% 근접으로 돌파 임박. PEG 0.3 극저평가 상태에서 영업익 +63% 성장 지속. 신고가 돌파 확정 후 소량 진입이 안전.

⚠️ 리스크: RSI 72 과매수. 신고가 돌파 실패 시 조정
━━━━━━━━━━━━━━━━━━━━━━━━━
🥈 5위 [A급] Lam Research
(LRCX) [반도체장비]
━━━━━━━━━━━━━━━━━━━━━━━━━
💰 $209.78 (-8.8%)
📊 종합 66.7점 | 💎밸류 73 | 💵가격 60
📈 RSI 50 | 52주고점 대비 -17%

📝 선정 이유:
하루 -8.8% 급락은 과잉 반응. ROE 66% 업계 최고 수준의 반도체장비주가 RSI 50 중립에서 거래 중. 52주 고점 -17% 할인된 지금이 분할 진입 적기.

⚠️ 리스크: 반도체 업황 둔화 우려, 추가 하락 가능
━━━━━━━━━━━━━━━━━━━━━━━━━
🥉 6위 [B급] Seagate Technology
(STX) [저장장치]
━━━━━━━━━━━━━━━━━━━━━━━━━
💰 $418.63 (-5.8%)
📊 종합 63.3점 | 💎밸류 55 | 💵가격 60
📈 RSI 72 | 52주고점 대비 -9%

📝 선정 이유:
오늘 -5.8% 하락 중이나 RSI 72 여전히 과열. 영업익 +73% 성장세는 강하나 기술주 전반 매도세 영향권. 조정 완료(RSI 50 이하) 확인 후 진입해도 늦지 않음.

⚠️ 리스크: RSI 72 과매수. 기술주 매도세 지속 시 추가 하락
━━━━━━━━━━━━━━━━━━━━━━━━━
🥉 7위 [A급] KLA Corporation
(KLAC) [반도체장비]
━━━━━━━━━━━━━━━━━━━━━━━━━
💰 $1,307.22 (-3.6%)
📊 종합 56.4점 | 💎밸류 71 | 💵가격 42
📈 RSI 42 | 52주고점 대비 -23%

📝 선정 이유:
ROE 101% 업계 최고의 반도체 검사장비주. 52주 고점 -23% 대폭 할인 + RSI 42 저점 구간. 고평가 우려(가격42점) 있으나 품질 대비 현재가는 매력적.

⚠️ 리스크: 고가 부담 ($1,300), 반도체 업황 불확실성
━━━━━━━━━━━━━━━━━━━━━━━━━
📊 8위 [A+급] Micron Technology
(MU) [반도체]
━━━━━━━━━━━━━━━━━━━━━━━━━
💰 $379.40 (-9.5%)
📊 종합 56.0점 | 💎밸류 85 | 💵가격 75
📈 RSI 60 | 52주고점 대비 -17%

📝 선정 이유:
밸류 85점 A+급 최고 펀더멘털. 영업익 +182%, PEG 0.07 극저평가. 그러나 하루 -9.5% 폭락 + 거래량 1.5배는 투매 진행 중 신호. 낙폭 안정 후 분할 진입 권장.

⚠️ 리스크: 당일 -9.5% 급락! 투매 진행 중. 2-3일 안정 확인 필요
━━━━━━━━━━━━━━━━━━━━━━━━━
📊 9위 [B급] ResMed Inc.
(RMD) [의료기기]
━━━━━━━━━━━━━━━━━━━━━━━━━
💰 $263.03 (+4.6%)
📊 종합 49.6점 | 💎밸류 59 | 💵가격 40
📈 RSI 54 | 52주고점 대비 -10%

📝 선정 이유:
RED 시장에서 유일하게 +4.6% 상승한 방어주! 헬스케어+노령화 테마는 경기 둔화기 안전지대. RSI 54 부담없고 거래량 1.6배 수급 양호. 방어 목적 편입 가치.

⚠️ 리스크: 점수 낮음 (49.6점), 성장성 제한적
━━━━━━━━━━━━━━━━━━━━━━━━━
📊 10위 [B+급] Amgen Inc.
(AMGN) [바이오제약]
━━━━━━━━━━━━━━━━━━━━━━━━━
💰 $366.20 (+8.2%)
📊 종합 46.4점 | 💎밸류 64 | 💵가격 20
📈 RSI 75 | 52주고점 대비 -1%

📝 선정 이유:
+8.2% 급등으로 52주 신고가 -0.7% 도전 중. ROE 82% 바이오 최고 수준. 신고가 돌파 시 추가 상승 여력.

⚠️ 리스크: RSI 75 과매수! 가격20점 버블 구간. 고점물림 위험
━━━━━━━━━━━━━━━━━━━━━━━━━

📌 등급 기준
• A+급: 밸류 80점 이상, 최우선 매수
• A급: 밸류 70점 이상, 적극 매수
• B+급: 밸류 60점 이상, 매수 고려
• B급: 밸류 50점 이상, 선별 매수
• C급: 밸류 50점 미만, 관망

━━━━━━━━━━━━━━━━━━━━━━━━━

🤖 Claude 핵심 추천 (RED시장)

✅ 지금 매수
• NEM - 금광=안전자산, 저평가
• AVGO - RSI31 과매도, 급락 기회

🔄 분할 진입
• LRCX - RSI50 중립, -17% 할인
• KLAC - ROE101%, -23% 할인

⏸️ 조정 대기
• LITE/CMC/STX/AMGN (RSI70+)

━━━━━━━━━━━━━━━━━━━━━━━━━
🤖 EPS Momentum v7.0.6 by Claude"""

url = f'https://api.telegram.org/bot{BOT_TOKEN}/sendMessage'
resp = requests.post(url, json={'chat_id': CHAT_ID, 'text': msg})
print(f'TOP10: {resp.status_code}')
if resp.status_code != 200:
    print(resp.json())
